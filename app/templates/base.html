<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>{{ title or "Contractor Project Tracker" }}</title>

  <link rel="manifest" href="{{ url_for('static', filename='pwa/manifest.json') }}">
  <link rel="icon" href="{{ url_for('static', filename='icons/icon-192.png') }}">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">

  {% block head %}{% endblock %}
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="{{ url_for('static', filename='icons/icon-192.png') }}" alt="" class="brand__icon">
      <div class="brand__text">
        <div class="brand__title">Contractor Tracker</div>
        <div class="brand__subtitle">à¹‚à¸„à¸£à¸‡à¸à¸²à¸£ â€¢ à¸§à¸±à¸ªà¸”à¸¸ â€¢ à¸œà¸¹à¹‰à¸£à¸±à¸šà¹€à¸«à¸¡à¸²à¸Šà¹ˆà¸§à¸‡</div>
      </div>
    </div>
  </header>

  <nav class="tabs">
    <a class="tab {{ 'is-active' if request.path.startswith('/projects') else '' }}" href="{{ url_for('pages.project_list') }}">
      <span class="tab__icon">ğŸ“</span>
      <span class="tab__label">à¹‚à¸„à¸£à¸‡à¸à¸²à¸£</span>
    </a>

    <a class="tab {{ 'is-active' if request.path == '/dashboard' else '' }}" href="{{ url_for('pages.dashboard') }}">
      <span class="tab__icon">ğŸ“Š</span>
      <span class="tab__label">à¸ªà¸£à¸¸à¸›</span>
    </a>
    <a class="tab {{ 'is-active' if request.path.startswith('/dashboard/income') else '' }}" href="{{ url_for('pages.dashboard_income') }}">
      <span class="tab__icon">ğŸ’°</span>
      <span class="tab__label">à¸ªà¸£à¸¸à¸›à¸£à¸²à¸¢à¸£à¸±à¸š</span>
    </a>

    <a class="tab {{ 'is-active' if request.path.startswith('/dashboard/expense') else '' }}" href="{{ url_for('pages.dashboard_expense') }}">
      <span class="tab__icon">ğŸ’¸</span>
      <span class="tab__label">à¸ªà¸£à¸¸à¸›à¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢</span>
    </a>

    <a class="tab {{ 'is-active' if request.path.startswith('/docs') else '' }}" href="{{ url_for('docs.docs_list') }}">
      <span class="tab__icon">ğŸ§¾</span>
      <span class="tab__label">à¹€à¸­à¸à¸ªà¸²à¸£à¸‚à¸²à¸¢</span>
    </a>


    <a class="tab {{ 'is-active' if request.path.startswith('/customers') else '' }}" href="{{ url_for('customers.customers_list') }}">
      <span class="tab__icon">ğŸ‘¥</span>
      <span class="tab__label">à¸¥à¸¹à¸à¸„à¹‰à¸²</span>
    </a>

    <a class="tab {{ 'is-active' if request.path.startswith('/settings/company') else '' }}" href="{{ url_for('settings.company_settings') }}">
      <span class="tab__icon">ğŸ¢</span>
      <span class="tab__label">à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸šà¸£à¸´à¸©à¸±à¸—</span>
    </a>
  </nav>

  <main class="container">

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div style="margin: 12px 0; display:flex; flex-direction:column; gap:8px;">
          {% for cat, msg in messages %}
            <div class="alert alert--{{ cat }}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <script src="{{ url_for('static', filename='js/pwa.js') }}"></script>
  {% block scripts %}{% endblock %}
</body>
</html>
